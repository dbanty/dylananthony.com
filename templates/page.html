{% extends "base.html" %}
{% import "macros/page.html" as page_macros %}

{% block title %}{{ page.title }} - {{ config.title }}{% endblock %}

{% block ogp_head %}
    {% if config.extra.ogp.locale %}
    <meta property="og:locale" content="{{ config.extra.ogp.locale }}">
    {% endif %}
    <meta property="og:title" content="{{ page.title }}">
    {% if page.components is containing("projects") or page.components is containing("blog") %}
    <meta property="og:type" content="article">
    <meta property="article:author" content="https://github.com/dbanty">
    <meta property="article:published_time" content="{{ page.date }}">
    {% if page.taxonomies.tags %}
    {% for tag in page.taxonomies.tags %}
    <meta property="article:tag" content="{{ tag }}">
    {% endfor %}
    {% endif %}
    {% if page.updated %}
    <meta property="article:modified_time" content="{{ page.updated }}">
    {% endif %}
    {% else %}
    <meta property="og:type" content="website">
    {% endif %}
    <meta property="og:url" content="{{ page.permalink | safe }}">
    {% if page.extra.featured_image %}
    {% set page_permalink = page.permalink | safe %}
    <meta property="og:image" content="{{ page_permalink ~ page.extra.featured_image }}">
    {% if page.extra.featured_image_alt %}
    <meta property="og:image:alt" content="{{ page.extra.featured_image_alt }}">
    {% endif %}
    {% endif %}
    {% if page.summary %}
    <meta property="og:description" content="{{ page.summary | striptags }}">
    {% endif %}
{% endblock %}

{% block content %}

<article class="prose prose-slate dark:prose-invert max-w-none">
    {% set page_contents = page.content %}
    <header>
        <h1 class="text-4xl text-center">{{ page.title }}</h1>
    </header>
    {{ page_macros::page_info(page=page, preview=false) }}
    {% block page_contents %}
    <div>
        {{ page_contents | safe }}
        {% if page.components is containing("blog") %}
            <hr>
        <p><i> Was this post super helpful to you? Tip me on
            <a href="https://github.com/sponsors/dbanty?frequency=one-time&sponsor=dbanty">GitHub</a>,
            <a href="https://www.patreon.com/dbanty">Patreon</a>,
            or <a href="https://ko-fi.com/dbanty">Ko-Fi</a>.
        </i></p>
        <p><i>
            Have a question or comment about this post? Leave it in the <a href="https://github.com/dbanty/dylananthony.com/discussions/{{ page.extra.discussion }}">discussion</a> thread on GitHub!
        </i></p>
        <p><i>
            Want to be notified of future posts? Watch releases in <a rel="author" href="https://github.com/dbanty/dylananthony.com">the GitHub repo</a> or <a rel="author" href="https://tech.lgbt/@dbanty">follow me on Mastodon</a>
        </i></p>
        <p><i>
            Have an idea or request for a future blog topic? Drop it in the GitHub discussions under <a href="https://github.com/dbanty/dylananthony.com/discussions/categories/ideas">ideas</a>.
        </i></p>
        {% endif %}
    </div>
    {% endblock page_contents %}
</article>

{% endblock content %}
